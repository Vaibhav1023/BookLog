{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from \"react\";\nimport { bookApi } from \"../services/api\";\nexport function useBooks(filters = {}) {\n  _s();\n  const [books, setBooks] = useState([]);\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const load = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    const [booksRes, statsRes] = await Promise.all([bookApi.list(filters), bookApi.stats()]);\n    if (booksRes.error) setError(booksRes.error);else setBooks(booksRes.data || []);\n    if (statsRes.data) setStats(statsRes.data);\n    setLoading(false);\n  }, [JSON.stringify(filters)]); // eslint-disable-line\n\n  useEffect(() => {\n    load();\n  }, [load]);\n  const refreshStats = async () => {\n    const {\n      data\n    } = await bookApi.stats();\n    if (data) setStats(data);\n  };\n  const addBook = async data => {\n    const {\n      data: book,\n      error\n    } = await bookApi.create(data);\n    if (error) return {\n      error\n    };\n    setBooks(p => [book, ...p]);\n    await refreshStats();\n    return {\n      data: book\n    };\n  };\n  const updateBook = async (id, data) => {\n    const {\n      data: book,\n      error\n    } = await bookApi.update(id, data);\n    if (error) return {\n      error\n    };\n    setBooks(p => p.map(b => b.id === id ? book : b));\n    await refreshStats();\n    return {\n      data: book\n    };\n  };\n  const deleteBook = async id => {\n    const {\n      error\n    } = await bookApi.delete(id);\n    if (error) return {\n      error\n    };\n    setBooks(p => p.filter(b => b.id !== id));\n    await refreshStats();\n    return {};\n  };\n  return {\n    books,\n    stats,\n    loading,\n    error,\n    addBook,\n    updateBook,\n    deleteBook\n  };\n}\n_s(useBooks, \"9fCtXjLy5joactnC97rAATkZH+c=\");","map":{"version":3,"names":["useState","useEffect","useCallback","bookApi","useBooks","filters","_s","books","setBooks","stats","setStats","loading","setLoading","error","setError","load","booksRes","statsRes","Promise","all","list","data","JSON","stringify","refreshStats","addBook","book","create","p","updateBook","id","update","map","b","deleteBook","delete","filter"],"sources":["C:/Users/chvai/Downloads/booklog/booklog/frontend/src/hooks/useBooks.js"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\nimport { bookApi } from \"../services/api\";\n\nexport function useBooks(filters = {}) {\n  const [books, setBooks] = useState([]);\n  const [stats, setStats] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const load = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    const [booksRes, statsRes] = await Promise.all([bookApi.list(filters), bookApi.stats()]);\n    if (booksRes.error) setError(booksRes.error);\n    else setBooks(booksRes.data || []);\n    if (statsRes.data) setStats(statsRes.data);\n    setLoading(false);\n  }, [JSON.stringify(filters)]); // eslint-disable-line\n\n  useEffect(() => { load(); }, [load]);\n\n  const refreshStats = async () => {\n    const { data } = await bookApi.stats();\n    if (data) setStats(data);\n  };\n\n  const addBook = async (data) => {\n    const { data: book, error } = await bookApi.create(data);\n    if (error) return { error };\n    setBooks((p) => [book, ...p]);\n    await refreshStats();\n    return { data: book };\n  };\n\n  const updateBook = async (id, data) => {\n    const { data: book, error } = await bookApi.update(id, data);\n    if (error) return { error };\n    setBooks((p) => p.map((b) => (b.id === id ? book : b)));\n    await refreshStats();\n    return { data: book };\n  };\n\n  const deleteBook = async (id) => {\n    const { error } = await bookApi.delete(id);\n    if (error) return { error };\n    setBooks((p) => p.filter((b) => b.id !== id));\n    await refreshStats();\n    return {};\n  };\n\n  return { books, stats, loading, error, addBook, updateBook, deleteBook };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}